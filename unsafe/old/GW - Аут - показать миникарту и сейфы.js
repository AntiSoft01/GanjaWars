// ==UserScript==
// @name         GW - Аут - показать миникарту и сейфы
// @namespace    http://tampermonkey.net/
// @version      0.1
// @description  try to take over the world!
// @author       You
// @match        http://www.gwars.ru/walk*
// @match        https://www.gwars.ru/walk*
// @grant        none
// ==/UserScript==
setInterval(()=>{if(null===document.getElementById("outland_minimap")&&document.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",'<style id="outland_minimap">.gold{animation-name:anim;animation-duration:.1s;animation-iteration-count:infinite}@keyframes anim{0%{background-color:red}50%{background-color:#ff0}100%{background-color:red}}#outland_map{border-collapse:collapse; background-image: url("https://ganjawars.net/external/skd88_dk3d230_sdddaeor.jpg");background-position-x: 6px;background-size: 97%;background-position-y: 29px;background-repeat: no-repeat;opacity: 1;width: 616px; height: 700px;}#outland_map td{width:100px;height:100px;border:1px solid #0001;background-color: #fffc;}.currentLocation{border:2px dashed green !important;background:green !important}.goldLocation{background-color:border: 1px solid #000}.none{border:none!important}.newOut{/*background:#ff0*/}.oldOut{background:#add8e6}</style>'),null===document.getElementById("outland_map")){document.getElementsByClassName("wb")[1].insertAdjacentHTML("beforebegin",'<table id="outland_map"> <tr> <td class="none"></td><td class="none"></td><td class="newOut" name="West Cape"></td><td class="newOut" name="North Beach"></td><td class="newOut" name="Abbey road"></td><td class="newOut" name="Threeforce"></td></tr><tr> <td class="none"></td><td name="Sector SA98"></td><td name="Raged Land"></td><td class="newOut" name="Alpha Three"></td><td class="newOut" name="Army Base"></td><td class="newOut" name="Overlord Point"></td></tr><tr> <td class="none"></td><td name="Ejection Point"></td><td name="Spherix point"></td><td name="Aikon" class="newOut"></td><td name="South Normand" class="newOut"></td><td name="East Cape" class="newOut"></td></tr><tr> <td name="Nou Lake"></td><td name="Dangerous Xith"></td><td name="Eye of Glory"></td><td name="Thordendal"></td><td name="Por Eso One"></td><td class="none"></td></tr><tr> <td name="Shoretale"></td><td name="Second Path"></td><td name="Chelby"></td><td name="Tracid Line"></td><td name="Freestates"></td><td class="none"></td></tr><tr> <td class="none"></td><td class="none"></td><td name="Tiger Lairs"></td><td name="Hypercube"></td><td name="World`s Corner"></td><td class="none"></td></tr><tr> <td class="none"></td><td class="none"></td><td name="South Tibet"></td><td class="none"></td><td class="none"></td><td class="none"></td></tr></table>');let t=+document.getElementsByClassName("txt")[1].getElementsByTagName("b")[2].innerText.match(/\d+/)-2,e=+document.getElementsByClassName("txt")[1].getElementsByTagName("b")[2].innerText.match(/\d+$/)-48;document.getElementsByName(document.getElementsByClassName("txt")[1].getElementsByTagName("b")[0].innerText)[0].insertAdjacentHTML("beforeend",`\n<div style="width: 5px;height: 5px;background-color: red;display: block;position: relative;left: ${t}px;top: ${e}px;padding-left: 0;margin-left: 0;"></div>\n`);let n=document.getElementsByClassName("wb")[1].parentElement.innerText.match(/В секторе.+/g);for(let t of n){let e=t.match(/([A-Z])\w+ /g).join("").replace(/ $/,""),n=+t.match(/\d+/g)[0]-2,a=+t.match(/\d+/g)[1]-48,d=+t.match(/\d+/g)[2];document.getElementsByName(e)[0].insertAdjacentHTML("beforeend",`\n<div style="width: 5px;height: 5px;background-color: black;display: block;position: relative;left: ${n}px;top: ${a}px;padding-left: 0;margin-left: 0;"></div>\n<span style="display: block;position: absolute;font-size: 20px;margin: 20px 0 0 70px;color: black;">${d}</span>\n`)}let a=document.getElementById("walk_table").getElementsByTagName("tbody")[1].getElementsByTagName("img");for(let t of a)"https://images.gwars.ru/q-new/cash.gif"===t.getAttribute("src")&&(t.className="gold")}},100),setInterval(()=>{document.getElementById("refreshlink").click()},6e4);